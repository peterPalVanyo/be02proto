import {writable} from 'svelte/store';

const data = [
    {
    "name": "Austria",
    "iso": "AUT",
    "val": "res",
    "2005": 17373.992861970557,
    "2006": 17982.153840607774,
    "2007": 18185.51265194832,
    "2008": 18619.302506588476,
    "2009": 18130.653208928456,
    "2010": 18188.966977601263,
    "2011": 18714.80995681093,
    "2012": 19439.1659396258,
    "2013": 19427.79230325142,
    "2014": 19286.620368169566,
    "2015": 19464.089168014787,
    "2016": 19908.588297710077,
    "2017": 21121.543448838365,
    "2018": 21790.41365795778,
    "2019": 22777.38467648405,
    "2020": 22649.626596139624,
    "2021": 23107.2,
    "2022": 23280.6642,
    "2023": 23223.877712999998,
    "2024": 23293.565200052995
    },
    {
    "name": "Austria",
    "iso": "AUT",
    "val": "nonres",
    "2005": 20739.981716944676,
    "2006": 21058.41785712028,
    "2007": 21126.26917042306,
    "2008": 19170.110567567976,
    "2009": 17486.455184961786,
    "2010": 16460.71950464332,
    "2011": 17083.682336185644,
    "2012": 17337.656657020154,
    "2013": 17145.410441579916,
    "2014": 17005.1250126712,
    "2015": 17086.12876226671,
    "2016": 17246.893843629317,
    "2017": 17190.73947324059,
    "2018": 18119.825432416354,
    "2019": 18822.45579883772,
    "2020": 17186.815625209245,
    "2021": 17909.2,
    "2022": 18159.1699,
    "2023": 18647.2175394,
    "2024": 18937.379770700398
    },
    {
    "name": "Austria",
    "iso": "AUT",
    "val": "civil",
    "2005": 8420.202585729055,
    "2006": 8688.473903623883,
    "2007": 9099.897854589512,
    "2008": 10320.224710364037,
    "2009": 8991.432224693097,
    "2010": 8127.74471528886,
    "2011": 8160.09556840348,
    "2012": 8241.637206771324,
    "2013": 8043.169316303736,
    "2014": 8252.7523893694,
    "2015": 8063.073011925644,
    "2016": 7756.737464447015,
    "2017": 7780.195011541601,
    "2018": 8760.677856541002,
    "2019": 9014.534167390462,
    "2020": 8924.353679071966,
    "2021": 9272.4,
    "2022": 9402.0018,
    "2023": 9580.4706402,
    "2024": 9733.91122116
    },
    {
    "name": "Belgium",
    "iso": "BEL",
    "val": "res",
    "2005": 17587.113786878977,
    "2006": 19028.547048553773,
    "2007": 19837.058081052113,
    "2008": 19552.659197201632,
    "2009": 19096.357985395778,
    "2010": 19204.361726437353,
    "2011": 20298.05925890739,
    "2012": 19591.707220289867,
    "2013": 19237.136849594794,
    "2014": 20396.666083588727,
    "2015": 21162.634136767338,
    "2016": 21883.104886656736,
    "2017": 22262.5850908083,
    "2018": 22678.845441342986,
    "2019": 23499.316095891543,
    "2020": 23124.857909381026,
    "2021": 24482.197139038173,
    "2022": 25227.269944433938,
    "2023": 25956.219088257785,
    "2024": 26719.78225093196
    },
    {
    "name": "Belgium",
    "iso": "BEL",
    "val": "nonres",
    "2005": 14652.94227810266,
    "2006": 15381.760269772696,
    "2007": 16754.663353146178,
    "2008": 17308.63893010581,
    "2009": 16515.479393460366,
    "2010": 16403.860544161726,
    "2011": 16866.310219960338,
    "2012": 17493.89135207059,
    "2013": 17730.534533804064,
    "2014": 17229.327194096506,
    "2015": 17056.716070223843,
    "2016": 17312.611322677978,
    "2017": 17619.6241883198,
    "2018": 18309.707314061696,
    "2019": 17774.5261247243,
    "2020": 15510.955952511798,
    "2021": 17610.413877769086,
    "2022": 17901.686450410154,
    "2023": 17769.442962954825,
    "2024": 17871.384299019275
    },
    {
    "name": "Belgium",
    "iso": "BEL",
    "val": "civil",
    "2005": 6163.086721640313,
    "2006": 6058.4285201511275,
    "2007": 5582.100673442839,
    "2008": 6038.317079755432,
    "2009": 6343.844935512643,
    "2010": 6513.328490757241,
    "2011": 6867.433715006193,
    "2012": 7409.782414452352,
    "2013": 7156.135221444061,
    "2014": 7052.045131650591,
    "2015": 7257.873421010695,
    "2016": 7397.3606200700615,
    "2017": 7696.057771079698,
    "2018": 7837.355684498689,
    "2019": 8080.0365156054195,
    "2020": 8212.391455636478,
    "2021": 8646.287212752748,
    "2022": 8907.430967260869,
    "2023": 9462.35531779399,
    "2024": 9837.275888056434
    },
    {
    "name": "Czechia",
    "iso": "CZE",
    "val": "res",
    "2005": 9433.961248321273,
    "2006": 10765.01759640215,
    "2007": 12223.572700584775,
    "2008": 11857.33756486465,
    "2009": 10563.52559190866,
    "2010": 9405.782008785964,
    "2011": 9520.577404166836,
    "2012": 7692.813388902574,
    "2013": 6819.641605325669,
    "2014": 6861.418424666874,
    "2015": 7669.707809783007,
    "2016": 8448.811144897825,
    "2017": 9225.123376630676,
    "2018": 9740.05592469727,
    "2019": 10372.29128150477,
    "2020": 10108.994100921638,
    "2021": 10947.696794550719,
    "2022": 10805.376736221559,
    "2023": 10762.155229276672,
    "2024": 11095.78204138425
    },
    {
    "name": "Czechia",
    "iso": "CZE",
    "val": "nonres",
    "2005": 7631.797360895826,
    "2006": 8312.091879610662,
    "2007": 9051.940181126709,
    "2008": 8785.084592414201,
    "2009": 8305.267728144958,
    "2010": 7845.36822922235,
    "2011": 7693.616156772791,
    "2012": 7683.872406590208,
    "2013": 7540.830029771825,
    "2014": 7838.825919698413,
    "2015": 7684.213968619548,
    "2016": 7224.504482201213,
    "2017": 8042.026424106063,
    "2018": 8749.816905686383,
    "2019": 8618.5206385592,
    "2020": 7874.60161082597,
    "2021": 7579.827255296288,
    "2022": 7951.238790805806,
    "2023": 8253.385864856426,
    "2024": 8509.240826666975
    },
    {
    "name": "Czechia",
    "iso": "CZE",
    "val": "civil",
    "2005": 6855.541873423828,
    "2006": 7471.101331159064,
    "2007": 7558.251220802032,
    "2008": 8354.180928210222,
    "2009": 9488.69637718686,
    "2010": 8836.56205342434,
    "2011": 7940.9840642268855,
    "2012": 7171.446118099888,
    "2013": 6744.47582408286,
    "2014": 7164.411414468744,
    "2015": 8355.894910872226,
    "2016": 7013.1116665916215,
    "2017": 6448.111276985941,
    "2018": 6874.856140182156,
    "2019": 7268.153349568356,
    "2020": 7415.88695388465,
    "2021": 7414.88541591299,
    "2022": 7385.225874249336,
    "2023": 7518.159939985824,
    "2024": 7585.8233794456955
    },
    {
    "name": "Denmark",
    "iso": "DNK",
    "val": "res",
    "2005": 17818.688303819887,
    "2006": 19846.738841636845,
    "2007": 19162.905112869117,
    "2008": 16894.085640494097,
    "2009": 14612.59160024217,
    "2010": 14045.335469943362,
    "2011": 15404.498664431867,
    "2012": 14768.42126479149,
    "2013": 14017.324729268486,
    "2014": 14582.752513056255,
    "2015": 14795.561000786478,
    "2016": 15348.958314565429,
    "2017": 16501.858386650412,
    "2018": 17033.08129258328,
    "2019": 18458.802568373183,
    "2020": 20398.210663451853,
    "2021": 21631,
    "2022": 21856.43,
    "2023": 22105.5629,
    "2024": 22489.945787
    },
    {
    "name": "Denmark",
    "iso": "DNK",
    "val": "nonres",
    "2005": 8458.722315905046,
    "2006": 9560.975780775845,
    "2007": 10387.86012148593,
    "2008": 11058.806877741694,
    "2009": 8929.805448620693,
    "2010": 7779.46486392764,
    "2011": 7598.837257985577,
    "2012": 7697.598363153855,
    "2013": 7934.650707143663,
    "2014": 8564.43342205108,
    "2015": 8944.08273502959,
    "2016": 9735.437246621925,
    "2017": 10192.94498643002,
    "2018": 10312.439727325269,
    "2019": 10454.89255938539,
    "2020": 11388.801487165012,
    "2021": 12177,
    "2022": 12363.452000000001,
    "2023": 12520.017251999998,
    "2024": 12645.21742452
    },
    {
    "name": "Denmark",
    "iso": "DNK",
    "val": "civil",
    "2005": 8705.19189749145,
    "2006": 9044.757926041297,
    "2007": 8290.540562389517,
    "2008": 7544.7957689861305,
    "2009": 7954.50028581751,
    "2010": 7812.370704524055,
    "2011": 7861.893811056969,
    "2012": 8247.60875367333,
    "2013": 8739.864381277299,
    "2014": 8324.909424470086,
    "2015": 9668.722745106126,
    "2016": 9914.963695567056,
    "2017": 9322.307216244451,
    "2018": 9226.71280991034,
    "2019": 8899.764147504342,
    "2020": 10093.819500480058,
    "2021": 10736,
    "2022": 10906.199999999999,
    "2023": 11082.196565999999,
    "2024": 11281.392308592
    },
    {
    "name": "Finland",
    "iso": "FIN",
    "val": "res",
    "2005": 15726.183961002527,
    "2006": 16490.780755156295,
    "2007": 16417.13025625444,
    "2008": 15112.0215599306,
    "2009": 13493.987918754687,
    "2010": 16403.95198795981,
    "2011": 17108.839056604804,
    "2012": 16557.214862207635,
    "2013": 15777.014500865342,
    "2014": 14976.531975375023,
    "2015": 15155.77640233617,
    "2016": 16171.317960134827,
    "2017": 16643.19518060158,
    "2018": 17245.85755439288,
    "2019": 16494.67072686994,
    "2020": 16098.695157038808,
    "2021": 17046,
    "2022": 17483.084,
    "2023": 16555.665539999998,
    "2024": 15957.2111234
    },
    {
    "name": "Finland",
    "iso": "FIN",
    "val": "nonres",
    "2005": 13000.631757016818,
    "2006": 13359.096396742008,
    "2007": 15532.25577629194,
    "2008": 16513.452132146344,
    "2009": 13869.32500789212,
    "2010": 13172.44713722636,
    "2011": 13777.492166378359,
    "2012": 13659.605310973964,
    "2013": 12928.46101257948,
    "2014": 12918.066393817782,
    "2015": 12678.856972494832,
    "2016": 13624.695883577131,
    "2017": 13960.255641707707,
    "2018": 14691.708788161493,
    "2019": 14988.471433630293,
    "2020": 14750.650715585994,
    "2021": 14658,
    "2022": 15459.4846,
    "2023": 14908.203183160002,
    "2024": 14216.423453471401
    },
    {
    "name": "Finland",
    "iso": "FIN",
    "val": "civil",
    "2005": 6483.796783057788,
    "2006": 6574.569938020597,
    "2007": 6587.44975025912,
    "2008": 6717.823729144009,
    "2009": 6748.435518333558,
    "2010": 6692.799850814467,
    "2011": 6455.539555802608,
    "2012": 6373.004469934954,
    "2013": 6567.579775625034,
    "2014": 6755.409650174728,
    "2015": 6941.576135840647,
    "2016": 7330.813473891207,
    "2017": 7232.475790945979,
    "2018": 7378.869675151533,
    "2019": 6853.470475101413,
    "2020": 7252.657587537563,
    "2021": 7090,
    "2022": 6753.594,
    "2023": 6510.4837769999995,
    "2024": 6491.3554537418995
    },
    {
    "name": "France",
    "iso": "FRA",
    "val": "res",
    "2005": 111994.0309172835,
    "2006": 116417.72084722466,
    "2007": 118174.77535592741,
    "2008": 115097.38445824222,
    "2009": 107374.75803956715,
    "2010": 102179.67783514371,
    "2011": 108240.6483158113,
    "2012": 106340.58655276221,
    "2013": 106224.80451455197,
    "2014": 98243.54439596977,
    "2015": 97243.0524274855,
    "2016": 101293.8779671397,
    "2017": 107531.64109852142,
    "2018": 108948.24323858044,
    "2019": 108306.30710988885,
    "2020": 98408.21079233653,
    "2021": 105761.69178458421,
    "2022": 108804.4895907465,
    "2023": 110537.80677637266,
    "2024": 112214.3667333014
    },
    {
    "name": "France",
    "iso": "FRA",
    "val": "nonres",
    "2005": 78490.66423269828,
    "2006": 81037.60364033595,
    "2007": 84641.92174279955,
    "2008": 83470.61217945965,
    "2009": 76473.59982503565,
    "2010": 69810.4444988772,
    "2011": 71451.53795085564,
    "2012": 69597.25245950154,
    "2013": 66972.02613160355,
    "2014": 64095.50307632303,
    "2015": 63056.67313351054,
    "2016": 63483.48874312054,
    "2017": 65109.104171199026,
    "2018": 67161.86034033317,
    "2019": 68204.6794889769,
    "2020": 55144.19516969984,
    "2021": 59070.93337776972,
    "2022": 61906.12791661251,
    "2023": 63014.66818832044,
    "2024": 63757.83704871859
    },
    {
    "name": "France",
    "iso": "FRA",
    "val": "civil",
    "2005": 49055.93767047762,
    "2006": 52253.666147429394,
    "2007": 54893.85796750034,
    "2008": 53305.48667095516,
    "2009": 50340.626670518985,
    "2010": 49293.34934431262,
    "2011": 50036.7165624291,
    "2012": 46740.777913688114,
    "2013": 46691.206806650895,
    "2014": 44381.84805821863,
    "2015": 42506.08705553622,
    "2016": 43292.98882276101,
    "2017": 43552.746755697575,
    "2018": 46715.64331197002,
    "2019": 51249.027074634134,
    "2020": 47770.9480726107,
    "2021": 49984.92324544169,
    "2022": 51289.924122909004,
    "2023": 52073.063947962524,
    "2024": 52677.91444582064
    },
    {
    "name": "Germany",
    "iso": "DEU",
    "val": "res",
    "2005": 187976.36307240636,
    "2006": 197418.73346470698,
    "2007": 194565.92345805553,
    "2008": 194550.50602768618,
    "2009": 190691.3536300838,
    "2010": 198637.7622611073,
    "2011": 210751.33099797997,
    "2012": 214115.23129185563,
    "2013": 213774.6028505615,
    "2014": 217766.03212379932,
    "2015": 220264.30869842105,
    "2016": 228958.91912980212,
    "2017": 233678.17308877548,
    "2018": 238828.94062562496,
    "2019": 242487.47708603472,
    "2020": 247182.58665047179,
    "2021": 246283.61539364562,
    "2022": 247515.03347061382,
    "2023": 249146.15754118515,
    "2024": 249596.9195443901
    },
    {
    "name": "Germany",
    "iso": "DEU",
    "val": "nonres",
    "2005": 91780.60690052519,
    "2006": 96367.85373467105,
    "2007": 100803.67187901706,
    "2008": 107743.81692991512,
    "2009": 106038.1943735414,
    "2010": 107323.53303199171,
    "2011": 110887.74557163913,
    "2012": 107323.460328363,
    "2013": 105536.30780649159,
    "2014": 105645.02710952051,
    "2015": 104003.24712778744,
    "2016": 104247.92113707657,
    "2017": 105191.4526477193,
    "2018": 106298.38029674735,
    "2019": 107752.8578398817,
    "2020": 107350.35501793007,
    "2021": 104010.54648188796,
    "2022": 103873.77261326427,
    "2023": 105043.39981135339,
    "2024": 105402.53414792761
    },
    {
    "name": "Germany",
    "iso": "DEU",
    "val": "civil",
    "2005": 67342.70132914501,
    "2006": 69281.2403267668,
    "2007": 68552.05904598691,
    "2008": 69474.08452733485,
    "2009": 66462.33118995898,
    "2010": 66532.50251882269,
    "2011": 70163.44897999876,
    "2012": 68060.47061680288,
    "2013": 67722.49923555153,
    "2014": 70527.90133217057,
    "2015": 69547.92483219849,
    "2016": 70861.12763278962,
    "2017": 73545.90045793199,
    "2018": 75489.64078858326,
    "2019": 76398.3708033457,
    "2020": 77740.5956924493,
    "2021": 76818.84510452191,
    "2022": 75676.54887781767,
    "2023": 77006.76704530111,
    "2024": 77776.83471575411
    },
    {
    "name": "Hungary",
    "iso": "HUN",
    "val": "res",
    "2005": 4314.170035295232,
    "2006": 4042.5597436879075,
    "2007": 4277.072957529088,
    "2008": 4455.088785340343,
    "2009": 4143.337105880901,
    "2010": 3335.563061629639,
    "2011": 2674.5182288041347,
    "2012": 2710.889069698574,
    "2013": 2354.6654527555593,
    "2014": 2323.9852528521888,
    "2015": 2346.845256379501,
    "2016": 2758.8489464281693,
    "2017": 3631.888558515555,
    "2018": 4249.890742494405,
    "2019": 4917.632151297348,
    "2020": 4525.7164090836795,
    "2021": 4555.961060631824,
    "2022": 4713.708930203458,
    "2023": 4524.663537544584,
    "2024": 4343.665429763429
    },
    {
    "name": "Hungary",
    "iso": "HUN",
    "val": "nonres",
    "2005": 5226.498589359519,
    "2006": 5816.985748581355,
    "2007": 5818.449558587373,
    "2008": 5656.710506960812,
    "2009": 5483.649372584066,
    "2010": 5409.303561295975,
    "2011": 5160.752457315331,
    "2012": 5158.020260209432,
    "2013": 5491.412326321259,
    "2014": 5822.9741558365795,
    "2015": 5942.47845785869,
    "2016": 4747.820499137719,
    "2017": 5631.40978929553,
    "2018": 6433.122212771483,
    "2019": 7260.257649837578,
    "2020": 7222.256561698093,
    "2021": 8447.625126687493,
    "2022": 8272.186062247434,
    "2023": 7979.4791341384835,
    "2024": 8067.247483693885
    },
    {
    "name": "Hungary",
    "iso": "HUN",
    "val": "civil",
    "2005": 5897.995520760122,
    "2006": 5372.219995655012,
    "2007": 3789.1317894719837,
    "2008": 3338.4732476064655,
    "2009": 3904.359157479792,
    "2010": 3179.293677095495,
    "2011": 2699.239333398065,
    "2012": 2712.475323927036,
    "2013": 3241.0809598548994,
    "2014": 4170.341189258559,
    "2015": 4143.602471801683,
    "2016": 3043.60597763506,
    "2017": 4022.311179616841,
    "2018": 5261.3478395961065,
    "2019": 6442.1056951721675,
    "2020": 5638.272037822158,
    "2021": 5544.529475691732,
    "2022": 5561.898975289107,
    "2023": 6288.00846131153,
    "2024": 6853.287067424054
    },
    {
    "name": "Ireland",
    "iso": "IRL",
    "val": "res",
    "2005": 23070.34173596775,
    "2006": 23938.403690791376,
    "2007": 22182.030186908967,
    "2008": 17750.373373621027,
    "2009": 8423.878094190291,
    "2010": 5514.300773079677,
    "2011": 4871.9288894944675,
    "2012": 3895.417488491774,
    "2013": 3985.9976064805664,
    "2014": 4522.366952700734,
    "2015": 4831.366844824711,
    "2016": 5601.859796236999,
    "2017": 7107.00732515088,
    "2018": 8523.543159279194,
    "2019": 8388.034095323766,
    "2020": 7934.254423203076,
    "2021": 7957.7175004,
    "2022": 8960.694725203793,
    "2023": 9420.286601527656,
    "2024": 10602.940976062018
    },
    {
    "name": "Ireland",
    "iso": "IRL",
    "val": "nonres",
    "2005": 14435.140380607685,
    "2006": 15333.216737361037,
    "2007": 17915.917942603395,
    "2008": 18024.192558289353,
    "2009": 11045.661371703898,
    "2010": 6509.419320519556,
    "2011": 5973.617981119808,
    "2012": 6253.941852419156,
    "2013": 7626.9822669261775,
    "2014": 7790.72819411031,
    "2015": 9005.734862604466,
    "2016": 10281.809097910249,
    "2017": 12028.953153311712,
    "2018": 12887.08878377284,
    "2019": 14744.760927756568,
    "2020": 14530.244474248673,
    "2021": 13591.331393252392,
    "2022": 13949.757067804787,
    "2023": 14295.546454353378,
    "2024": 14380.16537199418
    },
    {
    "name": "Ireland",
    "iso": "IRL",
    "val": "civil",
    "2005": 6041.176956042705,
    "2006": 6412.563039962035,
    "2007": 6721.942141587637,
    "2008": 8144.107130703509,
    "2009": 7860.02599269264,
    "2010": 6351.472548232015,
    "2011": 4698.931866653552,
    "2012": 4195.659237126556,
    "2013": 4385.188134382975,
    "2014": 4819.427471011812,
    "2015": 4645.049419303352,
    "2016": 4636.950593253864,
    "2017": 4464.543936313071,
    "2018": 4594.647141868621,
    "2019": 4374.569073870345,
    "2020": 3831.1050863320356,
    "2021": 3643.0681499999996,
    "2022": 3509.4096238181814,
    "2023": 3800.0176816133617,
    "2024": 4006.385294023486
    },
    {
    "name": "Italy",
    "iso": "ITA",
    "val": "res",
    "2005": 128993.31886158786,
    "2006": 133517.4944987519,
    "2007": 132275.45523749883,
    "2008": 126046.09609331164,
    "2009": 113801.97087668927,
    "2010": 109094.67688498314,
    "2011": 107330.43968252398,
    "2012": 100578.40861439376,
    "2013": 98883.94254654023,
    "2014": 97533.0681696737,
    "2015": 96035.9120172818,
    "2016": 97930.51344225477,
    "2017": 99090.98951522686,
    "2018": 100334.25356790109,
    "2019": 102184.11472640645,
    "2020": 96221.61897072743,
    "2021": 120733.06502216165,
    "2022": 124332.38901072233,
    "2023": 126839.68982347865,
    "2024": 127210.2753601796
    },
    {
    "name": "Italy",
    "iso": "ITA",
    "val": "nonres",
    "2005": 76546.37382674121,
    "2006": 75186.43047733573,
    "2007": 75186.49509384423,
    "2008": 72949.25624719201,
    "2009": 67005.66135790927,
    "2010": 61405.070172904896,
    "2011": 59463.18782836279,
    "2012": 55549.828211325264,
    "2013": 53268.93266172247,
    "2014": 51900.641678677704,
    "2015": 53207.15954352257,
    "2016": 54295.817789287335,
    "2017": 55345.559840868606,
    "2018": 56703.878570875604,
    "2019": 58412.16307603021,
    "2020": 54097.697359159254,
    "2021": 60067.780736237,
    "2022": 61438.14618266447,
    "2023": 64494.854335000186,
    "2024": 64714.5472798535
    },
    {
    "name": "Italy",
    "iso": "ITA",
    "val": "civil",
    "2005": 53986.92828569064,
    "2006": 53440.486499617306,
    "2007": 53707.68893211539,
    "2008": 51127.10798957615,
    "2009": 48448.74090993663,
    "2010": 45346.164852318725,
    "2011": 44399.97908732642,
    "2012": 41674.185813314536,
    "2013": 39282.451067256734,
    "2014": 37958.58804792803,
    "2015": 39797.36359386133,
    "2016": 38638.08738335852,
    "2017": 37392.78689157032,
    "2018": 38330.17733662901,
    "2019": 41640.406787480315,
    "2020": 42767.64052723857,
    "2021": 47784.43547862897,
    "2022": 48850.60023137441,
    "2023": 56008.10654044424,
    "2024": 56569.14860464209
    },
    {
    "name": "Netherlands",
    "iso": "NLD",
    "val": "res",
    "2005": 35595.09430561028,
    "2006": 37558.14677849789,
    "2007": 39391.64736397568,
    "2008": 40156.95666525199,
    "2009": 36197.81934484989,
    "2010": 31923.606600589104,
    "2011": 30687.205574550742,
    "2012": 27376.190827731614,
    "2013": 25260.647711241072,
    "2014": 25823.066240652755,
    "2015": 29460.30221321527,
    "2016": 33686.149597141506,
    "2017": 36616.251000071454,
    "2018": 41103.46347561972,
    "2019": 43008.32791834947,
    "2020": 41557.98178395927,
    "2021": 43346.966562541726,
    "2022": 45662.74782526439,
    "2023": 47657.170355049064,
    "2024": 48985.69264534907
    },
    {
    "name": "Netherlands",
    "iso": "NLD",
    "val": "nonres",
    "2005": 24854.806326162277,
    "2006": 25405.72003377219,
    "2007": 28430.933703091425,
    "2008": 30585.18703980982,
    "2009": 28725.63144353646,
    "2010": 24857.054441591048,
    "2011": 25341.305076328976,
    "2012": 23367.928347130666,
    "2013": 22280.578053903926,
    "2014": 22139.253612951892,
    "2015": 22838.70825498528,
    "2016": 23888.04876461028,
    "2017": 25405.089794395048,
    "2018": 27361.678415373917,
    "2019": 30426.228943341393,
    "2020": 30050.315907166565,
    "2021": 30762.47779314805,
    "2022": 31698.450933505537,
    "2023": 32110.081847052767,
    "2024": 32380.851053237995
    },
    {
    "name": "Netherlands",
    "iso": "NLD",
    "val": "civil",
    "2005": 20803.84750352739,
    "2006": 21508.072566062692,
    "2007": 21757.9862736974,
    "2008": 23206.74243065848,
    "2009": 23326.32767558306,
    "2010": 23093.89612240131,
    "2011": 25437.918644263023,
    "2012": 22876.443129061245,
    "2013": 23428.775874111772,
    "2014": 23381.420710039896,
    "2015": 24905.135540676758,
    "2016": 25222.256526990877,
    "2017": 23841.67831791279,
    "2018": 24398.349992646316,
    "2019": 24436.717477156744,
    "2020": 24994.3450001421,
    "2021": 24490.16383573714,
    "2022": 24895.626144307134,
    "2023": 25444.12381221042,
    "2024": 26172.609053547043
    },
    {
    "name": "Norway",
    "iso": "NOR",
    "val": "res",
    "2005": 17336.950508172275,
    "2006": 18405.020960031026,
    "2007": 19264.84294219872,
    "2008": 16612.21944744067,
    "2009": 15346.259276465536,
    "2010": 15470.132354785614,
    "2011": 17116.783948178676,
    "2012": 18039.84977724741,
    "2013": 18448.55192864649,
    "2014": 18415.167478525982,
    "2015": 18477.222826225603,
    "2016": 20001.584768651875,
    "2017": 21242.7444061696,
    "2018": 20246.0022762988,
    "2019": 20062.771927919894,
    "2020": 19575.691899782523,
    "2021": 20336,
    "2022": 19786.084,
    "2023": 19597.203883999995,
    "2024": 19497.467543799998
    },
    {
    "name": "Norway",
    "iso": "NOR",
    "val": "nonres",
    "2005": 12888.183858981347,
    "2006": 13766.367415632365,
    "2007": 15726.992122090061,
    "2008": 17070.930433703503,
    "2009": 16011.516782486444,
    "2010": 15798.745544472544,
    "2011": 16152.646803295585,
    "2012": 16675.193423691027,
    "2013": 16201.54322008687,
    "2014": 16748.180873627505,
    "2015": 16565.38735023186,
    "2016": 16555.19591831474,
    "2017": 17271.692764897947,
    "2018": 17169.32025495793,
    "2019": 17709.293260307295,
    "2020": 17563.87467682815,
    "2021": 17549,
    "2022": 17582.922,
    "2023": 18040.842227999998,
    "2024": 18267.965556323998
    },
    {
    "name": "Norway",
    "iso": "NOR",
    "val": "civil",
    "2005": 7787.520166469711,
    "2006": 8059.7999784382,
    "2007": 8255.197576531393,
    "2008": 8751.94671600344,
    "2009": 10426.97590727282,
    "2010": 9899.941919752931,
    "2011": 10252.122851061678,
    "2012": 11179.517180407345,
    "2013": 12364.747903508354,
    "2014": 12683.228591234765,
    "2015": 12772.793318306976,
    "2016": 12897.88844314282,
    "2017": 12673.741921188303,
    "2018": 13289.921120606221,
    "2019": 13381.510631015895,
    "2020": 13163.504551220707,
    "2021": 13707,
    "2022": 15170.108999999999,
    "2023": 15274.940438999996,
    "2024": 15341.305859846996
    },
    {
    "name": "Poland",
    "iso": "POL",
    "val": "res",
    "2005": 6796.616541590208,
    "2006": 7268.475159682824,
    "2007": 8379.076425974683,
    "2008": 9642.787743813633,
    "2009": 9427.950132197284,
    "2010": 9395.27628445793,
    "2011": 10030.519254758969,
    "2012": 10512.20441625331,
    "2013": 10316.69406607177,
    "2014": 10570.370888839323,
    "2015": 11076.620136673422,
    "2016": 11680.543292511395,
    "2017": 12560.742702884454,
    "2018": 14269.736345552888,
    "2019": 15252.23304009353,
    "2020": 15705.633564239037,
    "2021": 16912,
    "2022": 15688.68,
    "2023": 15496.074,
    "2024": 16197.888420000001
    },
    {
    "name": "Poland",
    "iso": "POL",
    "val": "nonres",
    "2005": 12421.244962476356,
    "2006": 13809.750737750153,
    "2007": 15389.879944275439,
    "2008": 16256.639578177681,
    "2009": 16050.797258066825,
    "2010": 16236.778459077392,
    "2011": 17620.684234064902,
    "2012": 17995.771193715176,
    "2013": 17804.205927635572,
    "2014": 18703.15481679912,
    "2015": 19334.304575153445,
    "2016": 17685.851739275535,
    "2017": 18894.578471524106,
    "2018": 20692.090670758535,
    "2019": 21648.660004709753,
    "2020": 20193.20935728735,
    "2021": 20066,
    "2022": 20800.91,
    "2023": 21725.33327,
    "2024": 22466.542115919998
    },
    {
    "name": "Poland",
    "iso": "POL",
    "val": "civil",
    "2005": 6944.087181780228,
    "2006": 8065.883388359128,
    "2007": 9053.222466383613,
    "2008": 10246.395536276474,
    "2009": 12566.331940262087,
    "2010": 14246.185824333968,
    "2011": 17063.948936672896,
    "2012": 15436.425152919513,
    "2013": 13657.518696467061,
    "2014": 14514.467873454918,
    "2015": 15195.076691378716,
    "2016": 13046.887163310392,
    "2017": 14033.26254710818,
    "2018": 17043.1571523658,
    "2019": 17720.022839721307,
    "2020": 17548.136905627453,
    "2021": 18463,
    "2022": 19476.872,
    "2023": 20269.238872,
    "2024": 20808.1312198
    },
    {
    "name": "Portugal",
    "iso": "PRT",
    "val": "res",
    "2005": 15485.818756863126,
    "2006": 14574.258629558837,
    "2007": 14104.276656422102,
    "2008": 12736.16182074916,
    "2009": 10087.040162033334,
    "2010": 8869.45080718419,
    "2011": 8112.332447641219,
    "2012": 6765.850719823011,
    "2013": 5928.863467051438,
    "2014": 5736.531280658102,
    "2015": 6177.475200112512,
    "2016": 7975.242017832779,
    "2017": 9260.59390901194,
    "2018": 10315.995063801629,
    "2019": 11000.405130642763,
    "2020": 11379.434182284562,
    "2021": 12723.717863969152,
    "2022": 12761.402853384889,
    "2023": 12833.409028622636,
    "2024": 12922.794315440804
    },
    {
    "name": "Portugal",
    "iso": "PRT",
    "val": "nonres",
    "2005": 5869.068058961936,
    "2006": 5660.841087247106,
    "2007": 5978.312862480983,
    "2008": 6035.594329861207,
    "2009": 5884.7044716146775,
    "2010": 5679.283660198341,
    "2011": 4862.746441082558,
    "2012": 4240.917753065181,
    "2013": 3531.7641447810424,
    "2014": 3509.0509438417857,
    "2015": 3548.858698938663,
    "2016": 4147.238050593465,
    "2017": 4587.624709476842,
    "2018": 5365.176279561054,
    "2019": 5721.544215449377,
    "2020": 5938.529675537641,
    "2021": 5829.352769217171,
    "2022": 5809.572123511538,
    "2023": 5894.435825081194,
    "2024": 6016.941079413097
    },
    {
    "name": "Portugal",
    "iso": "PRT",
    "val": "civil",
    "2005": 10588.098688294593,
    "2006": 9988.476689894107,
    "2007": 9984.84246164566,
    "2008": 9922.050494409645,
    "2009": 10165.51878063101,
    "2010": 10080.057264699952,
    "2011": 9255.63974095096,
    "2012": 7741.035419613393,
    "2013": 6476.861226907443,
    "2014": 6536.459456687057,
    "2015": 6536.459456687057,
    "2016": 5090.818197494091,
    "2017": 5234.2251462704535,
    "2018": 5354.144275782299,
    "2019": 6112.95187438307,
    "2020": 6297.409995482751,
    "2021": 5782.53954818304,
    "2022": 5892.863123021456,
    "2023": 6031.381267377212,
    "2024": 6174.241597890186
    },
    {
    "name": "Slovakia",
    "iso": "SVK",
    "val": "res",
    "2005": 1455.7022235816808,
    "2006": 1689.806715281066,
    "2007": 2080.30221281189,
    "2008": 2374.1607054871347,
    "2009": 1776.0340164425227,
    "2010": 1654.5705734634498,
    "2011": 1455.7060080352146,
    "2012": 1353.6454223864966,
    "2013": 1361.0617602126924,
    "2014": 1288.8573429404144,
    "2015": 1261.2800957867225,
    "2016": 1381.9264224161625,
    "2017": 1431.875393057941,
    "2018": 1564.6771495792123,
    "2019": 1629.4204637850523,
    "2020": 1393.8972877426077,
    "2021": 1385.8,
    "2022": 1471.0339600000002,
    "2023": 1550.0318220160002,
    "2024": 1650.0132636111684
    },
    {
    "name": "Slovakia",
    "iso": "SVK",
    "val": "nonres",
    "2005": 2622.820753686127,
    "2006": 3101.2619702087745,
    "2007": 3133.084111721356,
    "2008": 3679.6988911578246,
    "2009": 3244.9179895393904,
    "2010": 3126.571503294,
    "2011": 3169.5301417635897,
    "2012": 2861.9641320179603,
    "2013": 2502.3764137813605,
    "2014": 2432.6415189522795,
    "2015": 2629.016042190298,
    "2016": 2385.6747578571076,
    "2017": 2406.2852483454403,
    "2018": 2384.168376700107,
    "2019": 2334.4134993937496,
    "2020": 2017.254545393358,
    "2021": 1944.4,
    "2022": 1936.9668080000001,
    "2023": 2013.9152401488,
    "2024": 2127.9196357053233
    },
    {
    "name": "Slovakia",
    "iso": "SVK",
    "val": "civil",
    "2005": 1866.6569467407028,
    "2006": 2108.659191692706,
    "2007": 2102.0340974476667,
    "2008": 2060.779323724423,
    "2009": 2052.617657031969,
    "2010": 2037.924043729543,
    "2011": 2003.2256078598894,
    "2012": 1492.0209940964226,
    "2013": 1545.1194050779898,
    "2014": 1499.605165822874,
    "2015": 2299.477611540096,
    "2016": 1722.0190478020972,
    "2017": 1860.587046152868,
    "2018": 2206.216459150215,
    "2019": 1905.4772745087964,
    "2020": 1715.1056424866276,
    "2021": 1554.6,
    "2022": 1648.0595200000002,
    "2023": 1789.128469892,
    "2024": 1768.1318972713784
    },
    {
    "name": "Spain",
    "iso": "ESP",
    "val": "res",
    "2005": 310097.44555787416,
    "2006": 333823.74509480584,
    "2007": 340013.34818266274,
    "2008": 229007.3118692134,
    "2009": 131094.9870077193,
    "2010": 102525.68197580524,
    "2011": 85678.5549888189,
    "2012": 59693.02871843742,
    "2013": 49161.01526669428,
    "2014": 46962.56168956292,
    "2015": 48667.767592108416,
    "2016": 53298.76544988045,
    "2017": 59610.58983186014,
    "2018": 65009.43048681558,
    "2019": 68927.44169193174,
    "2020": 62833.945001807406,
    "2021": 67815,
    "2022": 71033.70000000001,
    "2023": 74969.082,
    "2024": 77251.946355
    },
    {
    "name": "Spain",
    "iso": "ESP",
    "val": "nonres",
    "2005": 103277.52732712192,
    "2006": 105212.06081104056,
    "2007": 107606.23011307347,
    "2008": 100470.41065748496,
    "2009": 81051.14718057893,
    "2010": 64422.796471439004,
    "2011": 56492.62097981032,
    "2012": 45029.84192104455,
    "2013": 39894.71242533767,
    "2014": 39242.13042432447,
    "2015": 39150.62133707395,
    "2016": 39955.574113381575,
    "2017": 41274.11898332641,
    "2018": 42746.768810020774,
    "2019": 44482.27372524194,
    "2020": 39148.38454155496,
    "2021": 40935,
    "2022": 42287.45,
    "2023": 43899.71949999999,
    "2024": 44950.68863749999
    },
    {
    "name": "Spain",
    "iso": "ESP",
    "val": "civil",
    "2005": 103654.51546112505,
    "2006": 111096.7648371472,
    "2007": 117175.03937999523,
    "2008": 110455.45565339367,
    "2009": 112332.38107430324,
    "2010": 93878.41200280465,
    "2011": 65385.16004679517,
    "2012": 37942.729736767535,
    "2013": 27068.58875766306,
    "2014": 27920.715644568416,
    "2015": 29539.94045833521,
    "2016": 25930.230439854076,
    "2017": 24319.456916739604,
    "2018": 25490.797503054266,
    "2019": 25947.618225300757,
    "2020": 24371.86335448076,
    "2021": 26120,
    "2022": 28552.103000000003,
    "2023": 30778.384098500002,
    "2024": 31928.80615650795
    },
    {
    "name": "Sweden",
    "iso": "SWE",
    "val": "res",
    "2005": 13780.792950026276,
    "2006": 15120.7460862825,
    "2007": 15600.625699562604,
    "2008": 14044.036037687238,
    "2009": 12195.167686662224,
    "2010": 13206.890999033863,
    "2011": 13512.482874063386,
    "2012": 12325.898180301348,
    "2013": 13059.404725174227,
    "2014": 14911.063013789793,
    "2015": 17580.84602478041,
    "2016": 19738.61689827701,
    "2017": 21001.330508056937,
    "2018": 20091.361553244933,
    "2019": 18632.8290543537,
    "2020": 18856.945744838104,
    "2021": 20998.66949194301,
    "2022": 21351.106292810306,
    "2023": 20779.579165229366,
    "2024": 20062.583156753542
    },
    {
    "name": "Sweden",
    "iso": "SWE",
    "val": "nonres",
    "2005": 11333.57412925605,
    "2006": 12328.564901946602,
    "2007": 13341.647922410722,
    "2008": 14114.205077297276,
    "2009": 12447.484967320359,
    "2010": 12476.687348310117,
    "2011": 13060.622742620173,
    "2012": 13112.888906486216,
    "2013": 12957.434493794117,
    "2014": 13575.484581366856,
    "2015": 13374.249541259896,
    "2016": 13561.668596804255,
    "2017": 14721.825259941843,
    "2018": 14646.626915685203,
    "2019": 15723.648548760653,
    "2020": 15654.265017493713,
    "2021": 16627.80269058296,
    "2022": 17117.33109939388,
    "2023": 16648.696594884936,
    "2024": 16679.643226728425
    },
    {
    "name": "Sweden",
    "iso": "SWE",
    "val": "civil",
    "2005": 11075.529810176004,
    "2006": 11837.499341331142,
    "2007": 12253.681113879025,
    "2008": 13043.763871946494,
    "2009": 14639.496010539933,
    "2010": 15025.199159637343,
    "2011": 15393.054835609151,
    "2012": 15690.887240104094,
    "2013": 15280.615784305557,
    "2014": 15779.754099812195,
    "2015": 15566.132656772832,
    "2016": 15833.708634852617,
    "2017": 16375.324821695822,
    "2018": 18294.014449593826,
    "2019": 18805.41111054186,
    "2020": 19916.632886043233,
    "2021": 21349,
    "2022": 21733.282,
    "2023": 21464.619584,
    "2024": 21867.171689184
    },
    {
    "name": "Switzerland",
    "iso": "CHE",
    "val": "res",
    "2005": 25511.135749433095,
    "2006": 25230.513256189333,
    "2007": 24463.953540922656,
    "2008": 23976.084872149397,
    "2009": 25117.34530598906,
    "2010": 27031.880323747424,
    "2011": 27837.005296372725,
    "2012": 28226.547439643746,
    "2013": 29316.106629349557,
    "2014": 29804.699659737198,
    "2015": 30355.503714743798,
    "2016": 30921.860056332334,
    "2017": 31302.199330357842,
    "2018": 30784.180026358794,
    "2019": 29788.42558527772,
    "2020": 29103.564968733932,
    "2021": 29721.00387473071,
    "2022": 29723.66753042743,
    "2023": 29645.7953813552,
    "2024": 29558.14862633404
    },
    {
    "name": "Switzerland",
    "iso": "CHE",
    "val": "nonres",
    "2005": 17862.096013355036,
    "2006": 17706.07709211076,
    "2007": 17368.261166583266,
    "2008": 17254.49524600294,
    "2009": 17233.49764728821,
    "2010": 17531.31002740126,
    "2011": 17997.5141563604,
    "2012": 18469.713314761168,
    "2013": 18937.55300239043,
    "2014": 19831.428659999372,
    "2015": 20305.263101392415,
    "2016": 19999.480749208382,
    "2017": 21005.40339026675,
    "2018": 21069.995173655516,
    "2019": 21671.717282993537,
    "2020": 21642.987785779616,
    "2021": 21772.495929845976,
    "2022": 21885.10349802061,
    "2023": 22172.94702126574,
    "2024": 22382.45916654361
    },
    {
    "name": "Switzerland",
    "iso": "CHE",
    "val": "civil",
    "2005": 11763.68650821233,
    "2006": 11734.090742294864,
    "2007": 11610.231485766748,
    "2008": 12237.183985998154,
    "2009": 13006.665651445921,
    "2010": 12288.12991502679,
    "2011": 12535.17442955183,
    "2012": 13322.104201820068,
    "2013": 13782.647369516453,
    "2014": 14577.867553253407,
    "2015": 14670.241002329676,
    "2016": 14186.85858561087,
    "2017": 13593.432868471627,
    "2018": 14621.22986778455,
    "2019": 14876.787546087344,
    "2020": 15382.333572403666,
    "2021": 15312.016195453383,
    "2022": 15351.390925739322,
    "2023": 15408.978705229973,
    "2024": 15541.885205178662
    },
    {
    "name": "United Kingdom",
    "iso": "GBR",
    "val": "res",
    "2005": 86029.28022914923,
    "2006": 85686.88385179704,
    "2007": 84875.05599243828,
    "2008": 76190.09903459015,
    "2009": 63645.57340777449,
    "2010": 71514.59440514099,
    "2011": 73232.18200555921,
    "2012": 69833.69297756105,
    "2013": 73186.25647060454,
    "2014": 86087.70371058014,
    "2015": 89075.20779571608,
    "2016": 96165.49972838358,
    "2017": 102648.00645595812,
    "2018": 105090.72914979933,
    "2019": 109152.56155112851,
    "2020": 92552.03732123689,
    "2021": 106533.65382597665,
    "2022": 111474.11402706886,
    "2023": 116186.2042879709,
    "2024": 120708.55054402404
    },
    {
    "name": "United Kingdom",
    "iso": "GBR",
    "val": "nonres",
    "2005": 91028.79264710683,
    "2006": 95257.6813709411,
    "2007": 100030.73396921677,
    "2008": 100766.63125329066,
    "2009": 85593.99003248752,
    "2010": 88353.88424590879,
    "2011": 87798.65558107317,
    "2012": 79509.23531187794,
    "2013": 78306.06133468548,
    "2014": 82647.34604149315,
    "2015": 83857.97100838262,
    "2016": 87506.93922271501,
    "2017": 90602.66906903051,
    "2018": 87580.24138735753,
    "2019": 89164.13052601878,
    "2020": 75150.79072930964,
    "2021": 78628.4604086777,
    "2022": 81521.25435290864,
    "2023": 84973.01495636799,
    "2024": 87967.77208793654
    },
    {
    "name": "United Kingdom",
    "iso": "GBR",
    "val": "civil",
    "2005": 27241.156206226,
    "2006": 25324.12397715875,
    "2007": 25742.624629421804,
    "2008": 27668.608584670725,
    "2009": 28537.288363400156,
    "2010": 31498.03106073594,
    "2011": 34523.72013243917,
    "2012": 31579.3740543187,
    "2013": 32423.924158603815,
    "2014": 32579.01004384913,
    "2015": 36935.20923270069,
    "2016": 36006.76605128936,
    "2017": 39741.3954024779,
    "2018": 41408.49505109778,
    "2019": 42714.10550891785,
    "2020": 41504.39238877593,
    "2021": 48854.63374208523,
    "2022": 51161.479446251426,
    "2023": 52467.35187968764,
    "2024": 52978.04946082791
    }
]


const relevantKeys = ["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023","2024"]


let dataObj = {"Austria": [], "Belgium": [], "Czechia": [], "Denmark": [], "Finland": [], "France": [], "Germany": [], "Hungary": [], "Ireland": [], "Italy": [], "Netherlands": [], "Norway": [], "Poland": [], "Portugal": [], "Slovakia": [], "Spain": [], "Sweden": [], "Switzerland": [], "United Kingdom": []};

data.forEach(d=>{
    let no = new Object();
    //filtering object - no time keys out
    let svelteObj = Object.fromEntries(Object.entries(d).filter(([key])=>relevantKeys.includes(key)));
    no[d.val] = svelteObj;
    dataObj[d.name].push(no)
})
const finalData = Object.entries(dataObj).map(entry=>{
    return {[entry[0]]: entry[1]};
})
console.log('final data', finalData)
//export const countries = writable(finalData)

export const countries = writable(data);
//export const range = writable(maxMin);

/* export const useData = {
    getSumByCountries: ()=>{
        let na = []
        finalData.forEach(d=>{
            let ob = new Object();
            ob[Object.keys(d)[0]] = [Object.keys(d)[0]['res']]
            console.log(d[Object.keys(d)[0]][0])
        })
    }
} */
//////////////////////////////////////////////////////////////////////////////////


//filter by country
let test = data.filter(d=>d.iso==='GBR')
//get pure based on country
let na = []
test.forEach(d=>{
    let testObj = Object.fromEntries(Object.entries(d).filter(([key])=>relevantKeys.includes(key)));
    na.push(testObj)
})

//merge object - do not foget to division by 3
/* const mergeObj = data => {
    const result = {};
    data.forEach(basket => {
        for (let [key, value] of Object.entries(basket)) {
            if (result[key]) {
                result[key] += value;
            } else {
                result[key] = value;
        }}});
    return result;
}; */
const mergeObj = data => {
    const result = {};
    data.forEach(basket => {
        for (let [key, value] of Object.entries(basket)) {
            if(key==="name" || key==="value" || key==="iso"){
                result[key]=value;
            } else if (result[key]) {
                result[key] += value;
            } else {
                result[key] = value;
        }}});
    return result;
};

const naMerged = mergeObj(na);
console.log('merged', naMerged);


//filter by val
let test2 = data.filter(d=>d.val==='res')
console.log('test1', test)
//get pure based on value
let na2 = []
test2.forEach(d=>{
    let testObj = Object.fromEntries(Object.entries(d).filter(([key])=>relevantKeys.includes(key)));
    na2.push(testObj)
})

let names = ["Austria", "Belgium", "Czechia", "Denmark", "Finland", "France", "Germany", "Hungary", "Ireland", "Italy", "Netherlands", "Norway", "Poland", "Portugal", "Slovakia", "Spain", "Sweden", "Switzerland", "United Kingdom"];

const getSumData = function() {
    let sumByIsos = [];
    names.forEach(c=>{
        let byisos = data.filter(d=>d.name===c)
        let byisosMerged = mergeObj(byisos)
        sumByIsos.push(byisosMerged)
    })
    console.log('not devided', sumByIsos)
    return sumByIsos
}

const dataSumByCountries = getSumData();
dataSumByCountries.forEach(d=>{
    d['2024a'] = ((d[2024] - d[2021])/d[2021])*100;
    d['2023a'] = ((d[2023] - d[2021])/d[2021])*100;
    d['2022a'] = ((d[2022] - d[2021])/d[2021])*100;
})
console.log('new sum> ',dataSumByCountries);

const getRange = function(target) {
    console.log('call the getrange::::')
    let diffs = []
    dataSumByCountries.forEach(d=>{
        let diff = (d[target]/3-d[2021]/3)/(d[2021]/3)*100;
        diffs.push(diff);
    })
    return [Math.min(...diffs), Math.max(...diffs)];
}

const getRanges = function(inds) {
    let currD;
    let relD = []
    if(inds.length==1) {
        currD = data.filter(d=>{return inds.includes(d.val)})
    } else {
        currD = data.filter(d=>{return inds.includes(d.val)})
    }
    currD.forEach(d=>{
        relevantKeys.forEach(k=>{
            relD.push(d[k])
        })
    })
    return [Math.max(...relD), Math.min(...relD)]
}
const selectNations = function(nats) {
    let selectedNations = data.filter(d=> nats.includes(d.name))
    return selectedNations
}
const selectTrends = function(nats,inds){
    let selectedNations = selectNations(nats)
    let selectedIndicators = selectedNations.filter(n=>inds.includes(n.val))
    return selectedIndicators
}
const getPure = function(d){
    let testO = Object.fromEntries(Object.entries(d).filter(([key])=>relevantKeys.includes(key)))
    return testO
}
const selectTrend = function(nat, ind) {
    let selectedTrend = data.find(d=>d.name===nat && d.val===ind)
    let trend = [];
    for (const [key, value] of Object.entries(selectedTrend)) {
        if(relevantKeys.includes(key)){
            trend.push({year: key, val: value, name:selectedTrend.name, ind:selectedTrend.val, iso:selectedTrend.iso});
        }
    }
    // @ts-ignore
    return trend.sort((a,b)=>a.year-b.year);
}
export const useData = {
    getSumData: getSumData,
    getRange: getRange,
    getRanges: getRanges,
    selectTrends: selectTrends,
    selectTrend: selectTrend
}

export const countriesSumDiff= writable(dataSumByCountries);